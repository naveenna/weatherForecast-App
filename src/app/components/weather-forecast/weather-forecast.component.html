<!-- Loading State -->
@if (loading()) {
  <div class="loading">
    <div class="spinner"></div>
    <p>Loading weather data...</p>
  </div>
}

<!-- Error State -->
@if (!loading() && error()) {
  <div class="error">
    <p>{{ error() }}</p>
  </div>
}

<!-- Forecast Available -->
@if (!loading() && !error() && forecast().length > 0) {

  <!-- Date Tabs -->
  <div class="tabs">
    @for (day of forecast(); track day.date) {
      <button
        class="tab"
        [class.active]="day.date === activeDate()"
        (click)="selectDate(day.date)"
      >
        {{ day.date }}
      </button>
    }
  </div>

  <!-- Forecast Cards -->
  <div class="forecast-container">
    @for (day of forecast(); track day.date) {
      @if (day.date === activeDate()) {
        @for (forecast of day.forecasts; track forecast.time) {
          <div class="forecast-card">
            <p>â° {{ forecast.time }}</p>

            <img
              [src]="'https://openweathermap.org/img/wn/' + forecast.icon + '@2x.png'"
              [alt]="forecast.description"
            />

            <p>ğŸŒ¡ {{ forecast.temperature }} Â°C</p>
            <p>ğŸ’¨ {{ forecast.windSpeed }} m/s</p>
            <p>{{ forecast.description }}</p>
          </div>
        }
      }
    }
  </div>
}

<!-- No City Selected / Empty State -->
@if (!loading() && !error() && forecast().length === 0) {
  <div class="no-forecast">
    <div class="icon">â˜ï¸</div>
    <h3>No forecast yet</h3>
    <p>Please choose a city to see the 5-day weather forecast.</p>
  </div>
}
